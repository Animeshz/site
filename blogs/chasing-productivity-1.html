<!DOCTYPE html>
<html lang="en-IN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chasing productivity - Part 1: The nixification saga | Animesh Sahu</title>
    <meta name="description" content="The first part of an intriguing journey: tapping into the nix module system.">
    <link rel="preload stylesheet" href="/site/assets/style.9b097e31.css" as="style">
    
    <script type="module" src="/site/assets/app.e0eff770.js"></script>
    <link rel="preload" href="/site/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/site/assets/chunks/framework.7446e1aa.js">
    <link rel="modulepreload" href="/site/assets/chunks/theme.71a09991.js">
    <link rel="modulepreload" href="/site/assets/blogs_chasing-productivity-1.md.e9da089c.lean.js">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Klee+One:wght@600&amp;display=swap%22">
    <link rel="alternate" type="application/rss+xml" href="/site/rss.xml" title="Animesh Sahu | Sitewide RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="/site/atom.xml" title="Animesh Sahu | Sitewide Atom Feed">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-9f53da12><!--[--><!--]--><!--[--><span tabindex="-1" data-v-6adecf08></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-6adecf08> Skip to content </a><!--]--><!----><header class="VPNav" data-v-9f53da12 data-v-3eaeeb12><div class="VPNavBar" data-v-3eaeeb12 data-v-fd97fd45><div class="container" data-v-fd97fd45><div class="title" data-v-fd97fd45><div class="VPNavBarTitle" data-v-fd97fd45 data-v-3215d495><a class="title" href="/site/" data-v-3215d495><!--[--><!--]--><!----><!--[-->Animesh Sahu / Home<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-fd97fd45><div class="curtain" data-v-fd97fd45></div><div class="content-body" data-v-fd97fd45><!--[--><!--]--><div class="VPNavBarSearch search" data-v-fd97fd45><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-fd97fd45 data-v-25195b31><span id="main-nav-aria-label" class="visually-hidden" data-v-25195b31>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/site/" tabindex="0" data-v-25195b31 data-v-5c9abb1f><!--[--><span data-v-5c9abb1f>üè† Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/site/blogs/" tabindex="0" data-v-25195b31 data-v-5c9abb1f><!--[--><span data-v-5c9abb1f>üìù Blogs</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/site/notes/" tabindex="0" data-v-25195b31 data-v-5c9abb1f><!--[--><span data-v-5c9abb1f>üìî Notes</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/site/projects/" tabindex="0" data-v-25195b31 data-v-5c9abb1f><!--[--><span data-v-5c9abb1f>üöÄ Projects</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/site/journal/" tabindex="0" data-v-25195b31 data-v-5c9abb1f><!--[--><span data-v-5c9abb1f>‚úçüèª Journal</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-fd97fd45 data-v-35d7cc8c><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-35d7cc8c data-v-3796519b data-v-4b1b2a9b><span class="check" data-v-4b1b2a9b><span class="icon" data-v-4b1b2a9b><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-3796519b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-3796519b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-fd97fd45 data-v-34c69feb data-v-9df0a34d><!--[--><a class="VPSocialLink no-icon" href="/site/atom.xml" aria-label target="_blank" rel="noopener" data-v-9df0a34d data-v-0b6d72b9><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-rss" viewBox="0 0 16 16"><path d="M5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-3-8.5a1 1 0 0 1 1-1c5.523 0 10 4.477 10 10a1 1 0 1 1-2 0 8 8 0 0 0-8-8 1 1 0 0 1-1-1zm0 4a1 1 0 0 1 1-1 6 6 0 0 1 6 6 1 1 0 1 1-2 0 4 4 0 0 0-4-4 1 1 0 0 1-1-1z"/></svg></a><a class="VPSocialLink no-icon" href="https://github.com/Animeshz/site" aria-label="github" target="_blank" rel="noopener" data-v-9df0a34d data-v-0b6d72b9><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-fd97fd45 data-v-2be127c6 data-v-836a85f6><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-836a85f6><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-836a85f6><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-836a85f6><div class="VPMenu" data-v-836a85f6 data-v-3d8d06cc><!----><!--[--><!--[--><!----><div class="group" data-v-2be127c6><div class="item appearance" data-v-2be127c6><p class="label" data-v-2be127c6>Appearance</p><div class="appearance-action" data-v-2be127c6><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-2be127c6 data-v-3796519b data-v-4b1b2a9b><span class="check" data-v-4b1b2a9b><span class="icon" data-v-4b1b2a9b><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-3796519b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-3796519b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-2be127c6><div class="item social-links" data-v-2be127c6><div class="VPSocialLinks social-links-list" data-v-2be127c6 data-v-9df0a34d><!--[--><a class="VPSocialLink no-icon" href="/site/atom.xml" aria-label target="_blank" rel="noopener" data-v-9df0a34d data-v-0b6d72b9><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-rss" viewBox="0 0 16 16"><path d="M5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-3-8.5a1 1 0 0 1 1-1c5.523 0 10 4.477 10 10a1 1 0 1 1-2 0 8 8 0 0 0-8-8 1 1 0 0 1-1-1zm0 4a1 1 0 0 1 1-1 6 6 0 0 1 6 6 1 1 0 1 1-2 0 4 4 0 0 0-4-4 1 1 0 0 1-1-1z"/></svg></a><a class="VPSocialLink no-icon" href="https://github.com/Animeshz/site" aria-label="github" target="_blank" rel="noopener" data-v-9df0a34d data-v-0b6d72b9><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-fd97fd45 data-v-e60fa36a><span class="container" data-v-e60fa36a><span class="top" data-v-e60fa36a></span><span class="middle" data-v-e60fa36a></span><span class="bottom" data-v-e60fa36a></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav fixed reached-top" data-v-9f53da12 data-v-5356aad0><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-5356aad0 data-v-89d30736><button data-v-89d30736>Return to top</button><!----></div></div><!----><div class="VPContent" id="VPContent" data-v-9f53da12 data-v-985615c6><div class="VPDoc has-aside" data-v-985615c6 data-v-7d2be7d2><!--[--><!--]--><div class="container" data-v-7d2be7d2><div class="aside" data-v-7d2be7d2><div class="aside-curtain" data-v-7d2be7d2></div><div class="aside-container" data-v-7d2be7d2><div class="aside-content" data-v-7d2be7d2><div class="VPDocAside" data-v-7d2be7d2 data-v-cca0b9b7><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-cca0b9b7 data-v-970191a8><div class="content" data-v-970191a8><div class="outline-marker" data-v-970191a8></div><div class="outline-title" role="heading" aria-level="2" data-v-970191a8>Table of Contents</div><nav aria-labelledby="doc-outline-aria-label" data-v-970191a8><span class="visually-hidden" id="doc-outline-aria-label" data-v-970191a8> Table of Contents for current page </span><ul class="root" data-v-970191a8 data-v-a42e02b1><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-cca0b9b7></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7d2be7d2><div class="content-container" data-v-7d2be7d2><!--[--><!--]--><!----><main class="main" data-v-7d2be7d2><div style="position:relative;" class="vp-doc _site_blogs_chasing-productivity-1" data-v-7d2be7d2><div><h1 id="chasing-productivity-part-1-the-nixification-saga" tabindex="-1">Chasing productivity - Part 1: The nixification saga <a class="header-anchor" href="#chasing-productivity-part-1-the-nixification-saga" aria-label="Permalink to &quot;Chasing productivity - Part 1: The nixification saga&quot;">‚Äã</a></h1><!----><p>Okay, So I&#39;ve been off for about 3 months. No posts, no journals. Hmm, what a long time.</p><p>The reason is, being frustrated with a few things earlier, I&#39;ve made a statement in the <a href="https://discord.gg/Framework" target="_blank" rel="noreferrer">Framework Discord</a> on 18th July, 2023 at 9:55PM IST that reads like this:</p><blockquote><p>Ykw, I&#39;ll waste my time building a experimental distro that&#39;s not a fork, that has easy process to create an iso, allowing switching various init and things like that, to see if its really that hard to do so... Adhering as much as possible to KISS principle, and making it able to easily ask for build outputs from external build agents such as github ci or vps rather than the most easy way nix/guix/gentoo/void defaults to, i.e. to build from source on local machine if binary not available. Going LFS but with certain enhancements I really wish were there, and easy ;p</p></blockquote><p>I was in a deep thought of making a linux distro too good to be true (easy iso creation, <a href="https://animeshz.github.io/site/blogs/void-linux.html#extremely-useful-scripts-xtools" target="_blank" rel="noreferrer">index pkg search</a>, <a href="https://github.com/nix-community/comma" target="_blank" rel="noreferrer">transient installs</a>, <a href="https://bedrocklinux.org/0.7/configuration.html" target="_blank" rel="noreferrer">scripting layer</a>, pinnable versions, cloud builds, <a href="https://www.thecodedmessage.com/posts/reproducibility" target="_blank" rel="noreferrer">dev-env replication</a>, reducing pollution in builds via chroot, being maintainable, etc).</p><p>I&#39;ve even made a few prototypes in private, but soon I realized something, nix is great not because its the best thing ever created, but because of consistent community efforts being put into RFCs and nixpkgs the largest repository which is frequently updated (even more than AUR). If you try to find anything its most likely already in nixpkgs.</p><p>Now I&#39;m not saying this is the only reason nix is great, obviously everything as a file is also a really really good thing, but its only a part of the bigger picture. And even if I were able to make something too good to be true, the maintainence of repository is something that can&#39;t be done solo.</p><p>There&#39;s enormous amount of efforts people are putting in to keep the linux and existing infrastructure alive, for free.</p><h2 id="self-realization" tabindex="-1">Self realization <a class="header-anchor" href="#self-realization" aria-label="Permalink to &quot;Self realization&quot;">‚Äã</a></h2><p>I can&#39;t control everything on my computer! Even if I were able to, it&#39;ll be too late to do anything inherently useful.</p><p>The original purpose of me choosing to try linux: Productivity!</p><p>There&#39;s a very bold statement given in the book <a href="https://fourhourworkweek.com" target="_blank" rel="noreferrer">4 Hour Work Week</a>:</p><div class="quote" data-v-0d7e63f3><!--[--><p>... Being efficient without regard to effectiveness is the default mode of the universe.</p><p>I would consider the best door-to-door salesperson efficient - that is, refined and excellent at selling door-to-door without wasting time - but utterly ineffective. He or she would sell more using a better vehicle such as e-mail or direct mail.</p><p>This is also true for the person who checks e-mail 30 times per day and develops an elaborate system of folder rules and sophisticated techniques for ensuring that each of those 30 brain farts moves as quickly as possible.</p><!--]--><p style="text-align:right;" data-v-0d7e63f3>- Tim Ferris</p></div><p>What I was trying to do was just an another example of this. The primary purpose was to improve my workflow, and be effective <em>to get the work done</em>. I was ignoring <em>to get the work done</em> for the sake of making contact of getting work done simplified.</p><p>For example, <a href="https://www.youtube.com/watch?v=NfeKenZHfDQ" target="_blank" rel="noreferrer">Write once, never write again</a> is what I consider productivity. It helps getting work done quickly and effectively.</p><h2 id="alternative-approach" tabindex="-1">Alternative Approach <a class="header-anchor" href="#alternative-approach" aria-label="Permalink to &quot;Alternative Approach&quot;">‚Äã</a></h2><p><a href="https://nixpkgs-manual-sphinx-markedown-example.netlify.app/development/writing-modules.xml.html" target="_blank" rel="noreferrer">Nix module system</a> is still great. And that&#39;s not a understatement.</p><h3 id="the-nix-language" tabindex="-1">The nix language <a class="header-anchor" href="#the-nix-language" aria-label="Permalink to &quot;The nix language&quot;">‚Äã</a></h3><p>First let me tell you about nix&#39;s one of the most important benefit, <em>the laziness</em>.</p><p><sub>You can evaluate any nix expression either at <a href="https://tvixbolt.tvl.su" target="_blank" rel="noreferrer">https://tvixbolt.tvl.su</a> or by running command <code>nix repl</code>.</sub></p><p>You can write things such as:</p><div class="language-nix line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nix</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;font-style:italic;">nix-repl</span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;"> :</span><span style="color:#BABED8;font-style:italic;">p</span><span style="color:#BABED8;"> let </span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#BABED8;"> = </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">v</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">; in </span><span style="color:#BABED8;font-style:italic;">x</span></span>
<span class="line"><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">v</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">v</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> ¬´</span><span style="color:#BABED8;font-style:italic;">repeated</span><span style="color:#BABED8;">¬ª</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">};</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>It allows one to reference a variable before its even defined. A slightly more complicated example:</p><div class="language-nix line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nix</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">let</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">x</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">v</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">y</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">w</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">y</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">p</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">y</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">q</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F78C6C;">in</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#BABED8;font-style:italic;">x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">v</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">p</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> ¬´</span><span style="color:#BABED8;font-style:italic;">repeated</span><span style="color:#BABED8;">¬ª</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">q</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">v</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> ¬´</span><span style="color:#BABED8;font-style:italic;">repeated</span><span style="color:#BABED8;">¬ª</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">w</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> ¬´</span><span style="color:#BABED8;font-style:italic;">repeated</span><span style="color:#BABED8;">¬ª</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">};</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">};</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">w</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> ¬´</span><span style="color:#BABED8;font-style:italic;">repeated</span><span style="color:#BABED8;">¬ª</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>This is possible through a functional programming construct called as <a href="https://cs.tvl.fyi/depot/-/blob/tvix/eval/src/value/thunk.rs" target="_blank" rel="noreferrer">Thunk</a>, also explained in <a href="https://nixos.wiki/wiki/Nix_Evaluation_Performance" target="_blank" rel="noreferrer">Nix Evaluation Performance</a>.</p><p>Basically almost everything is basically a 0-arg function; that evaluates and replaces itself in memory with the result only when needed.</p><h3 id="the-nix-s-module-system" tabindex="-1">The nix&#39;s module system <a class="header-anchor" href="#the-nix-s-module-system" aria-label="Permalink to &quot;The nix&#39;s module system&quot;">‚Äã</a></h3><p>This laziness gives a foundation to the nix&#39;s module system, that is clearly explained in <a href="https://www.youtube.com/watch?v=cZjOzOHb2ow" target="_blank" rel="noreferrer">Nix Hour #19 by Tweag</a>.</p><p>In short, with 2-3 different files you can define option in one file and set from other in any order.</p><div class="language-nix line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nix</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># file1.nix</span></span>
<span class="line"><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">config</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">lib</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">... }:</span></span>
<span class="line"><span style="color:#F78C6C;">with</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">lib</span><span style="color:#BABED8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">options</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">foo</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">mkOption</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">type</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">types</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;font-style:italic;">int</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">config</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">foo</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">mkDefault</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;"># sets default</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">bar</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">mkIf</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">config</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;font-style:italic;">foo</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">==</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">c</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">];</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># file2.nix</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">imports</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">./file1.nix</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">];</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">foo</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">7</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;"># override foo</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># note that you don&#39;t need to encapsulate everything in `config`,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># unless you have `options` in the file as well.</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># file3.nix</span></span>
<span class="line"><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">lib</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">... }:</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">imports</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">./file1.nix</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">./file2.nix</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">];</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">foo</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">lib</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;font-style:italic;">mkForce</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">9</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;"># override foo, with even higher priority</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>There are obviously various other important functions such as mkAfter, mkBefore, mkOverride.</p><p>This is possible only because of the laziness that was introduced in the language earlier, a very minimal code that allows this module system to be evaluated is:</p><div class="language-nix line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nix</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">let</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">lib</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">import</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">&lt;nixpkgs/lib&gt;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">evalModules&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">listOfFunctions</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F78C6C;">let</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#C792EA;">resultOfFunctions</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">map</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">f</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">f</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">listOfFunctions</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#C792EA;">x</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">lib</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;font-style:italic;">foldl&#39;</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">lib</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;font-style:italic;">recursiveUpdate</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">resultOfFunctions</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F78C6C;">in</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">in</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">evalModules&#39;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;"># x is merged form of all three attrset (unevaluated).</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">c</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;font-style:italic;">a</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;font-style:italic;">b</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">d</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;font-style:italic;">c</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">+</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">7</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">a</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">x</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">b</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">$ </span><span style="color:#BABED8;font-style:italic;">nix-instantiate</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">--</span><span style="color:#BABED8;font-style:italic;">eval</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">&lt;file.nix&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">--</span><span style="color:#BABED8;font-style:italic;">strict</span></span>
<span class="line"><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">a</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">b</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">c</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">d</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">37</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>This gives rise to the composability of one configuration on top of another. Things can be encapusulated in a file (aka module), and that module can receive values from files importing it.</p><p>I&#39;d urge you to look at <a href="https://github.com/ryantm/evalModules" target="_blank" rel="noreferrer">the slides of NixCon 2023 - Why choose Nix for configuration?</a> if you have interest in digging deep into nix module system.</p><h2 id="the-nixification" tabindex="-1">The nixification <a class="header-anchor" href="#the-nixification" aria-label="Permalink to &quot;The nixification&quot;">‚Äã</a></h2><p>Due to these things, nix as a language suits very well for the IaC (infrastructure as code). Highly composable, modular, and reproducible.</p><p>I nixified my good ol&#39; void-linux setup, so that if in any case my setup got broken, I could <a href="https://github.com/Animeshz/linux-desktop/blob/nix/homes/x86_64-linux/animesh@framework/default.nix" target="_blank" rel="noreferrer">restore everything</a>; All the keybind, default app associatations, text editor configs, browser down to extensions, display scale, cursor-size, fonts, shell plugins and what not?</p><p>And its battle tested, as when I shifted my root to <a href="/site/notes/20-29--DevEnvironment/21--Linux/21.01-ZFS.html">ZFS</a>, I was able to restore every single thing as-is, I just had to plug-in the ethernet cable and let nix do rest of the work.</p><p>This is productivity for effectiveness.</p><h3 id="my-setup" tabindex="-1">My Setup <a class="header-anchor" href="#my-setup" aria-label="Permalink to &quot;My Setup&quot;">‚Äã</a></h3><p><a href="https://github.com/Animeshz/linux-desktop" target="_blank" rel="noreferrer">Animeshz/linux-desktop</a> is root repository to my linux system configuration, managed by nix flake.</p><p>I&#39;ve primarily used <a href="https://github.com/nix-community/home-manager" target="_blank" rel="noreferrer">home-manager</a> with <a href="https://github.com/snowfallorg/lib/tree/feat/home-manager" target="_blank" rel="noreferrer">snowfall-lib</a> for installation &amp; configuration of most packages. For native stuffs (display drivers / virtualization that requires dkms kernel integrations / service management) I&#39;ve used <a href="https://github.com/Animeshz/linux-desktop/blob/nix/modules/home/puppet/default.nix#L17-L37" target="_blank" rel="noreferrer">Puppet RAL</a>.</p><p>So in most cases this config should be applicable to fit wide variety of distros, including various service managers (systemd/runit/openrc/etc).</p><h3 id="the-productivity" tabindex="-1">The productivity <a class="header-anchor" href="#the-productivity" aria-label="Permalink to &quot;The productivity&quot;">‚Äã</a></h3><p>A few important part of my setup I&#39;d like to highlight:</p><ul><li><p><a href="https://github.com/nix-community/comma" target="_blank" rel="noreferrer">nix-community/comma</a>: Allows me running binaries transiently. What if I don&#39;t have neofetch?</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">,</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">neofetch</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>And that&#39;s it, I don&#39;t need to search the package that provides that binary, nor I have to install it, just run it!</p><p>It internally works with a reverse index (file -&gt; package name); <a href="https://github.com/nix-community/nix-index" target="_blank" rel="noreferrer">nix-community/nix-index</a>.</p><p>Void offers <a href="https://github.com/leahneukirchen/xtools/blob/master/xmandoc" target="_blank" rel="noreferrer">reading man-page without installation</a>, which is one thing to look for in future to be able to do with nix.</p></li><li><p><a href="https://github.com/Animeshz/linux-desktop/blob/nix/modules/home/puppet/default.nix#L17-L37" target="_blank" rel="noreferrer">Puppet RAL</a>: Allows me to offload system-level configurations to <a href="https://www.puppet.com" target="_blank" rel="noreferrer">Puppet</a>.</p><div class="language-nix line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nix</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;font-style:italic;">puppet</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;font-style:italic;">ral</span><span style="color:#BABED8;"> = with </span><span style="color:#BABED8;font-style:italic;">lib</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;font-style:italic;">home-manager</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;font-style:italic;">hm</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;font-style:italic;">dag</span><span style="color:#BABED8;">; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#C792EA;">service</span><span style="color:#BABED8;">.</span><span style="color:#C792EA;">adb</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">entryAnywhere</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">ensure</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stopped</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>This let me redefine the <a href="https://github.com/Animeshz/linux-desktop/blob/nix/modules/home/puppet/etc.nix" target="_blank" rel="noreferrer">environment.etc</a> options for my home-manager setup.</p><p>There&#39;s one minor drawback, nix removes files if you remove config, but puppet will only do so if you set it to be absent.</p></li></ul><h2 id="scope-of-improvement" tabindex="-1">Scope of Improvement <a class="header-anchor" href="#scope-of-improvement" aria-label="Permalink to &quot;Scope of Improvement&quot;">‚Äã</a></h2><p>I think one of the fundamental flaws of nix is that it looks at everything as a build process and shipment process (I&#39;d describe as creation immutability).</p><p>It doesn&#39;t care much about procedures, such as editing an existent iso, quick operations such as merging images, performing bulk operations; shell script is still suited for that purpose even on NixOS and we already know how much they are unrestricted to be non-idempotent or irreproducible.</p><p>I think if we can wrap the procedures into lazy langauge (e.g. nix) with module system, we can do or handle various different things, without proposing shell hacks that are hard to get right.</p><h2 id="future-goals" tabindex="-1">Future Goals <a class="header-anchor" href="#future-goals" aria-label="Permalink to &quot;Future Goals&quot;">‚Äã</a></h2><p>I&#39;d like to personalize the setup, I do have all the keybind, bars and emacs setup that is making me very much productive. But,</p><ul><li>I&#39;d like to achieve something like <a href="https://www.youtube.com/watch?v=NfeKenZHfDQ" target="_blank" rel="noreferrer">Write once, never write again</a>.</li><li>Improve accessibility (composable scripting, monitoring system, etc). Things that will actually help me <em>getting things done</em>.</li><li>Research transparent cloud off-loading of the tasks (you&#39;ll laugh at me, but I broke the fans on my laptop, and I use auto-cpufreq to cap the CPU).</li><li>Some way to host packages that is overlayed or not present in <a href="https://cache.nixos.org" target="_blank" rel="noreferrer">https://cache.nixos.org</a>, I&#39;ve been thinking about <a href="https://docs.attic.rs/tutorial.html#pushing" target="_blank" rel="noreferrer">attic</a> that allows upstream caching.</li></ul><p>Journey to nix has been really interesting, this is a really good quote I found on <a href="https://news.ycombinator.com/item?id=28900008" target="_blank" rel="noreferrer">HN</a>:</p><blockquote><p>my code is possible if people want it üòÉ the real value of NixOS is hardware and OS config can be turned into libraries</p></blockquote><p>This is the part 1 of the chasing productivity series, I&#39;d keep posting updates while also getting things done this time!</p><h2 id="further-reading" tabindex="-1">Further Reading <a class="header-anchor" href="#further-reading" aria-label="Permalink to &quot;Further Reading&quot;">‚Äã</a></h2><p>Backlinks:</p><ul><li><a href="https://www.reddit.com/r/linux/comments/17ijsa2/chasing_productivity_part_1_the_nixification_saga" target="_blank" rel="noreferrer">r/linux</a></li><li><a href="https://www.reddit.com/r/NixOS/comments/17ijmld/chasing_productivity_part_1_the_nixification_saga" target="_blank" rel="noreferrer">r/NixOS</a></li><li><a href="https://www.linkedin.com/posts/animeshz_chasing-productivity-part-1-the-nixification-activity-7124097146324172800-NiCk" target="_blank" rel="noreferrer">Linkedin</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-7d2be7d2 data-v-f948c78d><!--[--><!--]--><div class="edit-info" data-v-f948c78d><div class="edit-link" data-v-f948c78d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/Animeshz/site/edit/main/content/blogs/chasing-productivity-1.md" target="_blank" rel="noreferrer" data-v-f948c78d><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" aria-label="edit icon" data-v-f948c78d><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page<!--]--></a></div><div class="last-updated" data-v-f948c78d><p class="VPLastUpdated" data-v-f948c78d data-v-4f9fb653>Last updated: <time datetime="2023-11-21T14:55:21.000Z" data-v-4f9fb653></time></p></div></div><!----></footer><!--[--><!--[--><!--[--><div class="prev-next" data-v-51d10272><div class="pager" data-v-51d10272><!----></div><div class="pager" data-v-51d10272><a class="pager-link next" href="/site/blogs/a-critical-analysis-of-linux-landscape.html" data-v-51d10272><span class="desc" data-v-51d10272>Next page</span><span class="title" data-v-51d10272>A Critical Analysis of Linux Landscape (2023)</span></a></div></div><div id="gitalk-container"></div><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"notes_90-99--miscellaneous_92--learnings_92.01-counter-intuitive.md\":\"6e5d4a6f\",\"notes_90-99--miscellaneous_91--curation_91.02-awesome-resources.md\":\"b52116d9\",\"blogs_demystifying-uefi.md\":\"9c13b96e\",\"notes_20-29--devenvironment_21--linux_21.03-cli-utilities.md\":\"7605eced\",\"blogs_chasing-productivity-1.md\":\"e9da089c\",\"notes_90-99--miscellaneous_92--learnings_92.02-out-of-box.md\":\"32b84ebc\",\"notes_index.md\":\"a7a3a300\",\"notes_20-29--devenvironment_21--linux_21.01-zfs.md\":\"5f0000c2\",\"notes_20-29--devenvironment_21--linux_21.02-nix.md\":\"11520f9c\",\"blogs_ml-tldr.md\":\"197be933\",\"blogs_index.md\":\"1e7a42a6\",\"journal_2023_july.md\":\"10d65d25\",\"blogs_creating-yet-another-distribution-zxcv-linux-1.md\":\"28d1c301\",\"projects_index.md\":\"b3ead917\",\"journal_2023_june.md\":\"4633d2c6\",\"blogs_a-critical-analysis-of-linux-landscape.md\":\"e47d622c\",\"notes_90-99--miscellaneous_91--curation_91.01-note-taking.md\":\"cdf848f9\",\"blogs_linux-2.md\":\"08ffe909\",\"notes_20-29--devenvironment_22--text-editors_22.01-emacs.md\":\"a3b8ecef\",\"blogs_using-git-for-effective-collaboration.md\":\"6dcf7639\",\"index.md\":\"56566bc3\",\"notes_90-99--miscellaneous_92--learnings_92.03-health.md\":\"bb654d58\",\"blogs_working-with-binaries.md\":\"7ebe191f\",\"blogs_git.md\":\"ffb430ad\",\"blogs_void-linux.md\":\"055de903\",\"notes_90-99--miscellaneous_91--curation_91.03-awesome-projects.md\":\"8fdac18e\",\"blogs_linux-1.md\":\"7354d944\",\"journal_index.md\":\"b0141e67\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-IN\",\"dir\":\"ltr\",\"title\":\"Animesh Sahu\",\"description\":\"I write about wide-variety of untouched topics in a simplified way.\",\"base\":\"/site/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"Animesh Sahu / Home\",\"search\":{\"provider\":\"local\"},\"outline\":[2,6],\"outlineTitle\":\"Table of Contents\",\"socialLinks\":[{\"icon\":{\"svg\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" fill=\\\"currentColor\\\" class=\\\"bi bi-rss\\\" viewBox=\\\"0 0 16 16\\\"><path d=\\\"M5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-3-8.5a1 1 0 0 1 1-1c5.523 0 10 4.477 10 10a1 1 0 1 1-2 0 8 8 0 0 0-8-8 1 1 0 0 1-1-1zm0 4a1 1 0 0 1 1-1 6 6 0 0 1 6 6 1 1 0 1 1-2 0 4 4 0 0 0-4-4 1 1 0 0 1-1-1z\\\"/></svg>\"},\"link\":\"/site/atom.xml\"},{\"icon\":\"github\",\"link\":\"https://github.com/Animeshz/site\"}],\"editLink\":{\"pattern\":\"https://github.com/Animeshz/site/edit/main/content/:path\"},\"nav\":[{\"text\":\"üè† Home\",\"link\":\"/\"},{\"text\":\"üìù Blogs\",\"link\":\"/blogs/\"},{\"text\":\"üìî Notes\",\"link\":\"/notes/\"},{\"text\":\"üöÄ Projects\",\"link\":\"/projects/\"},{\"text\":\"‚úçüèª Journal\",\"link\":\"/journal/\"}],\"sidebar\":{\"/notes/\":[{\"text\":\"20-29--DevEnvironment\",\"items\":[{\"text\":\"<span style=\\\"font-weight: 700;\\\">21--Linux</span>\",\"items\":[{\"text\":\"21.01-ZFS\",\"link\":\"/notes/20-29--DevEnvironment/21--Linux/21.01-ZFS\"},{\"text\":\"21.02-Nix\",\"link\":\"/notes/20-29--DevEnvironment/21--Linux/21.02-Nix\"},{\"text\":\"21.03-Cli-Utilities\",\"link\":\"/notes/20-29--DevEnvironment/21--Linux/21.03-Cli-Utilities\"}]},{\"text\":\"<span style=\\\"font-weight: 700;\\\">22--Text-Editors</span>\",\"items\":[{\"text\":\"22.01-Emacs\",\"link\":\"/notes/20-29--DevEnvironment/22--Text-Editors/22.01-Emacs\"}]}]},{\"text\":\"90-99--Miscellaneous\",\"items\":[{\"text\":\"<span style=\\\"font-weight: 700;\\\">91--Curation</span>\",\"items\":[{\"text\":\"91.01-Note-Taking\",\"link\":\"/notes/90-99--Miscellaneous/91--Curation/91.01-Note-Taking\"},{\"text\":\"91.02-Awesome-Resources\",\"link\":\"/notes/90-99--Miscellaneous/91--Curation/91.02-Awesome-Resources\"},{\"text\":\"91.03-Awesome-Projects\",\"link\":\"/notes/90-99--Miscellaneous/91--Curation/91.03-Awesome-Projects\"}]},{\"text\":\"<span style=\\\"font-weight: 700;\\\">92--Learnings</span>\",\"items\":[{\"text\":\"92.01-Counter-Intuitive\",\"link\":\"/notes/90-99--Miscellaneous/92--Learnings/92.01-Counter-Intuitive\"},{\"text\":\"92.02-Out-Of-Box\",\"link\":\"/notes/90-99--Miscellaneous/92--Learnings/92.02-Out-Of-Box\"},{\"text\":\"92.03-Health\",\"link\":\"/notes/90-99--Miscellaneous/92--Learnings/92.03-Health\"}]}]}]}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>